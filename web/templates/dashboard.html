{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard - SEL4C{% endblock title %}

{% block main %}

<nav class="navbar navbar-expand-lg px-3 bg-primary fixed-top shadow-sm" data-bs-theme="dark">
    <div class="container-fluid">
      <img class="me-3" src="{% static 'svg/logo_white.svg' %}" alt="SEL4C" height="50">
      <h2 class="text-light mb-0 fw-semibold">Dashboard de {{ user.name }}</h2>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 d-flex fs-5">
          <li class="nav-item px-3">
            <a class="nav-link" href="{% url 'logout' %}">Cerrar sesión</a>
          </li>
        </ul>
      </div>
    </div>
</nav>

<div id="content" class="mt-5 mx-4">
  <p class= "pt-5 fs-4">
    Estudiantes:
  </p>
  <div class="row text-center w-100 mb-2 ms-1 pe-4">
    <div class="col">
      <p class="fs-4 fw-bold mb-0">Nombre</p>
    </div>
    <div class="col">
      <p class="fs-4 fw-bold mb-0">Correo electrónico</p>
    </div>
    <div class="col-1">
      <p class="fs-4 fw-bold mb-0">Edad</p>
    </div>
    <div class="col-2">
      <p class="fs-4 fw-bold mb-0">Género</p>
    </div>
    <div class="col-5">
      <p class="fs-4 fw-bold mb-0">Título más reciente</p>
    </div>
  </div>
  <div class="accordion" id="accordion1">
    {% for student in students %}
    <div class="accordion-item bg-body-tertiary border-0 mb-3">
      <div class="accordion-header">
        <button class="accordion-button collapsed bg-body-tertiary" type="button" data-bs-toggle="collapse" data-bs-target="#{{ student.user.username|cut:"@"|cut:"." }}" aria-expanded="false" aria-controls="{{ student.user.username|cut:"@"|cut:"." }}">
          <div class="row text-center w-100">
            <div class="col">
              <p class="fs-5 fw-semibold mb-0">{{ student.user.name }} {{ student.user.first_lastname }} {{ student.user.first_lastname }}</p>
            </div>
            <div class="col">
              <p class="fs-5 mb-0">{{ student.user.username }}</p>
            </div>
            <div class="col-1">
              <p class="fs-5 mb-0">{{ student.age }}</p>
            </div>
            <div class="col-2">
              <p class="fs-5 mb-0">{{ student.get_gender_display }}</p>
            </div>
            <div class="col-5">
              <p class="fs-5 mb-0">{{ student.degree.last }}</p>
            </div>
          </div>
        </button>
      </div>
      <div id="{{ student.user.username|cut:"@"|cut:"." }}" class="accordion-collapse collapse">
        <div class="accordion-body text-center">
          <img height="400" src="https://media.tenor.com/x8v1oNUOmg4AAAAd/rickroll-roll.gif">
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

{% endblock main %}